# 3.3 긴 함수

오랜 기간 동안 잘 활용되는 프로그램들은 하나같이 짧은 함수로 구성됐다.

간접 호출 효과, 즉 코드를 이해/공유/선택 하기 쉬워진다는 장점은 함수를 짧게 구성할 때 나오는 것이다.

코드 읽는 입장에서는 함수가 하는 일을 파악하기 위해 왔다갔다 해야 하는 부담이 있지만, **함수 이름을 잘 지어두면** 본문 코드를 볼 이유가 사라진다. **그러기 위해서는 훨씬 적극적으로 함수를 쪼개야한다.**

- 주석을 달아야 할 만한 부분은 무조건 함수로 만든다.

  - **함수 본문**
    - 원래 **주석으로 설명하려던 코드**가 담기고,
  - **함수 이름**
    - 동작 방식이 아닌 **'의도'**가 드러나게 짓는다.

- 이렇게 함수로 묶은 코드는 여러 줄일 수도 있고 단 한 줄일 수도 있다.
- 원래 코드보다 길어지더라도 함수로 뽑는다.
- 단, 함수에 이름에 코드의 목적을 드러내야 한다.
- 핵심은 **함수의 길이가 아닌, 함수의 목적(의도)과 구현 코드의 괴리가 얼마나 큰가**다.
- 즉, 무엇을 하는지를 코드가 잘 설명해주지 못할수록 함수로 만드는 게 유리하다.

## 1. 함수 추출하기

함수를 짧게 만드는 작업의 99%

- 매개변수와 임시 변수를 많이 사용한다면 추출 작업에 방해가 된다. 이 경우엔 난해해질 수 있다.
  - **임시 변수를 질의 함수로 바꾸기**로 임시 변수의 수를 줄인다.
  - **매개변수 객체 만들기**와 **객체 통째로 넘기기**로 매개변수의 수를 줄인다.
  - **함수를 명령으로 바꾸기**는 그럼에도 임시 변수와 매개변수가 너무 많다면 고려해볼 수 있다.

## 2. 추출할 코드 덩어리를 찾아내기

- **주석을 참고하기**
  - 이해하기 어려운 부분에 주석이 있기 마련
- **조건문**
  - **조건문 분해하기**: 거대한 switch문을 구성하는 case문마다 함수 추출하기를 적용해서 각 case의 본문을 함수 호출문 하나로 바꾼다.
  - **조건부 로직을 다형성으로 바꾸기**: 같은 조건 기준으로 나뉘는 switch문이 여러 개인 경우 적용한다.
- **반복문**
  - 반복문 안의 코드와 함께 추출해서 독립된 함수로 만든다.
  - **반복문 쪼개기**: 추출한 반복문 코드에 적합한 이름이 떠오르지 않는다면 성격이 다른 두 가지 작업이 섞여 있기 때문일 수 있으므로 분리해본다.
