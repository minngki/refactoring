# 3.8 산탄총 수술

뒤엉킨 변경과 비슷하면서도 정반대다.

**코드를 변경할 때 마다 자잘하게 수정해야 하는 클래스가 많을 때** 풍긴다. 변경할 부분이 코드 전반에 퍼져 있다면 찾기도 어렵고 꼭 수정해야 할 곳을 지나치기 쉽다.

### 1. 함수 옮기기 and 필드 옮기기

- 함께 변경되는 대상들을 모두 한 모듈에 묶어두면 좋다.

### 2. 여러 함수를 클래스로 묶기

- 비슷한 데이터를 다루는 함수가 많은 경우에 좋다.

### 3. 여러 함수를 변환 함수로 묶기

- 데이터 구조를 변환하거나 보강하는 함수들의 경우에 적용한다.

### 4. 단계 쪼개기

- 이렇게 묶은 함수들의 출력 결과를 묶어서 다음 단계의 로직으로 전달할 수 있다면 적용한다.

### 5. 함수 인라인하기 or 클래스 인라인하기

- 어설프게 분리된 로직을 인라인 리팩터링 하나로 합치는 것도 산탄총 수술에 대처하는 좋은 방법이다.

- 메서드나 클래스가 비대해지지만, 나중에 추출하기 리팩터링으로 더 좋은 형태로 분리할 수 있다.
  - 사실 우리는 작은 함수와 클래스에는 지나칠 정도로 집착하지만, 코드를 재구성하는 중간 과정에선느 큰 덩어리로 뭉쳐지는데 개의치 않는다.
